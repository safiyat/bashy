if [ -f /etc/bash_completion ] && ! shopt -oq posix; then
. /etc/bash_completion
fi

for completion in $(find /etc/bash_completion.d -type f); do
    test -x ${completion} && . ${completion}
done

for completion in $(find /opt/homebrew/share/bash-completion/completions ! -type d); do
    test -x ${completion} && . ${completion}
done

# Completions for kubectl
if which -s kubectl; then
    source <(kubectl completion bash)
fi

# pipx completions
if command -v pipx > /dev/null; then
    eval "$(register-python-argcomplete pipx)"
fi

# iterm2 integration
test -e "${HOME}/.iterm2_shell_integration.bash" && source "${HOME}/.iterm2_shell_integration.bash"

# Completions for limactl
if which -s limactl; then
    source <(limactl completion bash)
fi
